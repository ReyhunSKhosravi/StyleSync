// سرویس پیشرفته تحلیل شخصیت با پیشنهادات کامل مو، آرایش و حجاب

import { colorPalettes, skinToneGuide, colorCombinations } from '../data/professionalColors.js';
import { fashionGlossary } from '../data/improvedQuestions.js';

// تایپ‌های شخصیتی کامل
const personalityTypes = {
  bold_confident: {
    name: 'جسور و پررنگ',
    icon: '🔥',
    description: 'شما فردی جسور و پراعتماد به نفس هستید که دوست دارید در میان جمع متمایز باشید. سبک شما پرانرژی، جذاب و چشم‌نواز است.',
    colorPalette: 'warm_energetic',
    
    clothing: {
      essentials: [
        { 
          item: 'کت قرمز یا نارنجی',
          description: 'یک کت رنگی که توجه جلب کند',
          brands: ['مانگو، زارا، دفکتو']
        },
        { 
          item: 'شلوار چرمی یا اسکینی مشکی',
          description: 'پایه قدرتمند برای ست‌های جسورانه',
          brands: ['پل‌اند‌بیر، کوتون']
        },
        { 
          item: 'پیراهن‌های طرح‌دار',
          description: 'طرح‌های هندسی یا حیوانی',
          brands: ['اچ‌اند‌ام، مانگو']
        },
        {
          item: 'کفش پاشنه‌بلند قرمز',
          description: 'برای قدرت بیشتر و توجه بیشتر',
          brands: ['آلدو، استرادیواریوس']
        }
      ]
    },

    hair: {
      styles: [
        {
          style: 'موهای بلند و پرحجم',
          description: 'موهای بلند با امواج بزرگ یا صاف کشیده - جلب توجه',
          products: ['اسپری حجم‌دهنده، موس']
        },
        {
          style: 'رنگ‌های جسورانه',
          description: 'هایلایت قرمز، مس، یا حتی رنگ‌های فانتزی',
          products: ['رنگ موی حرفه‌ای']
        },
        {
          style: 'کوتاهی جسورانه (باب کوتاه یا پیکسی)',
          description: 'اگر دوست دارید متفاوت باشید',
          products: ['واکس، ژل']
        }
      ],
      tips: [
        'موهای شما باید همیشه مرتب و استایل شده باشد',
        'از اکسسوری‌های موی درشت استفاده کنید',
        'حجم مو برای شما مهم است - از محصولات حجم‌دهنده استفاده کنید'
      ]
    },

    makeup: {
      daily: {
        name: 'آرایش روزانه',
        steps: [
          'پرایمر و کرم پودر با پوشش متوسط',
          'کانتور ملایم برای برجسته‌کردن صورت',
          'ابروهای پرپشت و مشخص',
          'خط چشم نازک',
          'مژه‌های حالت‌دار',
          'رژ لب قرمز آجری یا نود'
        ],
        products: ['کرم پودر مات، ماسکارا حجم‌دهنده، رژ لب ماندگار']
      },
      evening: {
        name: 'آرایش مهمانی',
        steps: [
          'پوشش کامل و فلاولس (بی‌نقص)',
          'کانتور و هایلایت قوی - صورت مجسمه‌ای',
          'سایه چشم اسموکی (دودی) یا رنگی و جسورانه',
          'خط چشم بالدار (کت‌کریس)',
          'مژه‌های مصنوعی',
          'رژ لب قرمز کلاسیک یا رنگ‌های جسور'
        ],
        products: ['سایه پالت رنگی، هایلایتر، رژ مات قرمز']
      },
      tips: [
        'لب قرمز همیشه دوست شماست!',
        'یاد بگیرید کانتور درست بزنید - خیلی تاثیر داره',
        'ابروهای مرتب و پرپشت صورتتان را جذاب‌تر می‌کند',
        'از رنگ‌های جسور نترسید - تست کنید!'
      ]
    },

    hijab: {
      styles: [
        {
          style: 'شال‌های ساتن یا ابریشمی براق',
          description: 'شال‌های لوکس با رنگ‌های جسورانه',
          how: 'به شیوه مدرن با یک طرف بلندتر'
        },
        {
          style: 'ترکیب شال و هدبند',
          description: 'شال ساده + هدبند طلایی یا جواهرنشان',
          how: 'ابتدا هدبند، سپس شال را پشت سر ببندید'
        },
        {
          style: 'توربان مخملی',
          description: 'توربان‌های رنگی و لوکس',
          how: 'آماده است، فقط بپوشید و سنجاق کنید'
        }
      ],
      colors: ['قرمز شرابی', 'طلایی', 'نارنجی سوخته', 'مشکی براق'],
      tips: [
        'شال‌های شما باید کیفیت خوبی داشته باشند',
        'از برند‌های معروف شال استفاده کنید',
        'شال‌های طرح‌دار و رنگی به شما می‌آید',
        'یک شال قرمز در کمد لباستان ضروری است!'
      ]
    },

    accessories: {
      must_have: [
        'گوشواره‌های بزرگ و جلب‌توجه (هوپ یا چلچراغ)',
        'گردنبند استیتمنت (بزرگ و درشت)',
        'دستبند‌های طلایی یا نقره‌ای درشت',
        'کیف دستی رنگی یا چرمی',
        'عینک آفتابی بزرگ',
        'کمربند چرمی عریض'
      ]
    },

    tips: [
      'هرگز از رنگ نترسید - شما برای رنگ ساخته شده‌اید',
      'اعتماد به نفس مهم‌ترین اکسسوری شماست',
      'یک قطعه برجسته در هر ست کافی است - همه چیز را یکجا نپوشید',
      'کیفیت لباس‌های شما مهم است - بهتر است کمتر بخرید اما باکیفیت',
      'یاد بگیرید چطور قد خودتان را بلندتر نشان دهید',
      'استایل شما باید با شخصیت قوی شما همخوانی داشته باشد'
    ]
  },

  elegant_professional: {
    name: 'شیک و حرفه‌ای',
    icon: '👔',
    description: 'شما فردی متین، منظم و حرفه‌ای هستید. سبک شما کلاسیک، تمیز و همیشه شیک است.',
    colorPalette: 'neutral_classic',
    
    clothing: {
      essentials: [
        { 
          item: 'کت بلیزر مشکی یا سرمه‌ای',
          description: 'پایه هر کمد لباس حرفه‌ای - باید دوخت عالی داشته باشد',
          brands: ['مانگو Suit، زارا Basic، ماسیمو دوتی']
        },
        { 
          item: 'پیراهن سفید کلاسیک',
          description: 'پنبه 100٪ - همیشه اتو کشیده',
          brands: ['زارا، اچ‌اند‌ام Premium']
        },
        { 
          item: 'شلوار راسته مشکی و خاکستری',
          description: 'برش استاندارد، پارچه باکیفیت',
          brands: ['مانگو، کوتون']
        },
        {
          item: 'کفش پاشنه کوتاه مشکی',
          description: 'راحت برای کار روزانه، شیک برای جلسات',
          brands: ['آلدو، اکو']
        }
      ]
    },

    hair: {
      styles: [
        {
          style: 'شینیون پایین',
          description: 'مرتب، شیک، حرفه‌ای - ایده‌آل برای محیط کار',
          products: ['اسپری نگه‌دارنده، سنجاق موی ساده']
        },
        {
          style: 'موهای صاف و مرتب روی شانه',
          description: 'با خط وسط یا کناری - همیشه براق و سالم',
          products: ['سرم مو، اسپری براق‌کننده']
        },
        {
          style: 'باب کلاسیک (تا روی شانه)',
          description: 'تمیز و حرفه‌ای - نیازی به استایل زیاد ندارد',
          products: ['فوم حجم‌دهنده ملایم']
        }
      ],
      tips: [
        'موهای شما باید همیشه تمیز، مرتب و سالم باشند',
        'رنگ طبیعی یا هایلایت‌های ملایم',
        'از مدل‌های پیچیده یا خیلی خاص خودداری کنید',
        'سادگی و تمیزی مهم‌تر از هر چیز'
      ]
    },

    makeup: {
      daily: {
        name: 'آرایش روزانه (محیط کار)',
        steps: [
          'BB کرم یا کرم پودر سبک',
          'کانتور بسیار ملایم (اختیاری)',
          'ابروهای طبیعی و مرتب',
          'سایه چشم قهوه‌ای/خاکستری ملایم',
          'مژه‌های طبیعی (ماسکارا قهوه‌ای یا مشکی)',
          'رژ لب نود یا صورتی ملایم'
        ],
        products: ['BB کرم، ماسکارا طبیعی، رژ نود']
      },
      evening: {
        name: 'آرایش مهمانی',
        steps: [
          'کرم پودر با پوشش متوسط',
          'کانتور ملایم',
          'سایه چشم کلاسیک (قهوه‌ای/طلایی)',
          'خط چشم نازک',
          'مژه‌های حالت‌دار',
          'رژ لب کلاسیک (قرمز آجری یا صورتی)'
        ],
        products: ['پالت سایه neutral، رژ کلاسیک']
      },
      tips: [
        'آرایش شما باید طبیعی و حرفه‌ای به نظر برسد',
        'از رنگ‌های نئون یا خیلی جسور در محیط کار خودداری کنید',
        'پوست سالم مهم‌تر از آرایش زیاد است',
        'یاد بگیرید آرایش ۵ دقیقه‌ای بزنید'
      ]
    },

    hijab: {
      styles: [
        {
          style: 'شال مربعی به شیوه فرانسوی',
          description: 'شال مربعی بزرگ، زیر چانه گره زده',
          how: 'مثلثی تا بزنید، روی سر بگذارید، زیر چانه محکم ببندید'
        },
        {
          style: 'شال مستطیلی ساده',
          description: 'یک رنگ، پارچه باکیفیت، بدون سنجاق',
          how: 'دور سر بپیچید و انتها را داخل یقه بگذارید'
        },
        {
          style: 'شال ابریشمی با بن‌سر',
          description: 'شیک و مرتب، مخصوص محیط رسمی',
          how: 'ابتدا بن‌سر، سپس شال را مرتب روی آن'
        }
      ],
      colors: ['مشکی', 'سرمه‌ای', 'خاکستری', 'بژ', 'سفید'],
      tips: [
        'کیفیت پارچه خیلی مهم است - ابریشم یا شیفون باکیفیت',
        'رنگ‌های ساده و تک‌رنگ',
        'همیشه اتو کشیده و تمیز',
        'شال‌های شما باید با لباس‌تان هماهنگ باشد، نه برجسته'
      ]
    },

    accessories: {
      must_have: [
        'ساعت کلاسیک با بند چرمی',
        'گوشواره‌های مروارید یا طلای ساده',
        'کیف چرمی A4 برای کار',
        'کفش پاشنه کوتاه یا تخت چرمی',
        'عینک طبی یا آفتابی با فریم ساده',
        'روسری ابریشمی برای گردن'
      ]
    },

    tips: [
      'کیفیت مهم‌تر از کمیت - سرمایه‌گذاری روی قطعات اصلی',
      'رنگ‌های خنثی را پایه کنید، رنگ با اکسسوری اضافه کنید',
      'همیشه مرتب و اتو کشیده باشید',
      'سبک کلاسیک هرگز از مد نمی‌افتد',
      'یاد بگیرید لایه‌بندی (لایرینگ) کنید',
      'سادگی، کلید شیکی است'
    ]
  },

  casual_natural: {
    name: 'راحت و طبیعی',
    icon: '🌿',
    description: 'شما فردی ساده، راحت‌طلب و طبیعی هستید. سبک شما بی‌تکلف، آرام و دوست‌داشتنی است.',
    colorPalette: 'earth_natural',
    
    clothing: {
      essentials: [
        { 
          item: 'شلوار جین راحت',
          description: 'جین‌های boyfriend یا mom jean - راحت و شیک',
          brands: ['لیوایز، مانگو، پول‌اند‌بیر']
        },
        { 
          item: 'تی‌شرت پنبه‌ای ساده',
          description: 'رنگ‌های زمینی - سفید، بژ، خاکی',
          brands: ['زارا Basic، اچ‌اند‌ام، کوتون']
        },
        { 
          item: 'کارد یگان بافتنی',
          description: 'نرم و گرم برای لایه‌بندی',
          brands: ['مانگو، اچ‌اند‌ام']
        },
        {
          item: 'کتانی سفید',
          description: 'راحت برای همه جا',
          brands: ['کانورس، وانس، آدیداس']
        }
      ]
    },

    hair: {
      styles: [
        {
          style: 'موهای باز و طبیعی',
          description: 'امواج طبیعی یا صاف - بدون استایل زیاد',
          products: ['کرم تقویت‌کننده فر طبیعی، سرم مو']
        },
        {
          style: 'دم اسبی ساده',
          description: 'بالا یا پایین - راحت و کاربردی',
          products: ['کش مو ساده']
        },
        {
          style: 'بافت شل (براید)',
          description: 'بافت فرانسوی یا یک طرفه',
          products: ['کش مو، سنجاق']
        }
      ],
      tips: [
        'هر چقدر طبیعی‌تر، بهتر',
        'رنگ موی طبیعی یا هایلایت خیلی ملایم',
        'سلامت مو مهم‌تر از استایل است',
        'شامپوهای طبیعی و ارگانیک استفاده کنید'
      ]
    },

    makeup: {
      daily: {
        name: 'آرایش روزانه (یا بدون آرایش!)',
        steps: [
          'فقط مرطوب‌کننده + ضد آفتاب',
          'کرم BB اگر دوست دارید',
          'ابروهای طبیعی - فقط مرتب کنید',
          'بالم لب یا رژ شفاف',
          '(اختیاری) کمی رژگونه کرمی'
        ],
        products: ['BB کرم، بالم لب، رژگونه کرمی']
      },
      evening: {
        name: 'آرایش ملایم برای بیرون رفتن',
        steps: [
          'کرم پودر سبک',
          'ابروی طبیعی',
          'سایه قهوه‌ای ملایم',
          'ماسکارا قهوه‌ای',
          'رژ لب صورتی طبیعی'
        ],
        products: ['ماسکارا، رژ لب طبیعی']
      },
      tips: [
        'آرایش "بی‌آرایش" (no-makeup makeup) را یاد بگیرید',
        'سلامت پوست را در اولویت قرار دهید',
        'محصولات طبیعی و ارگانیک امتحان کنید',
        'کمتر، بهتر است'
      ]
    },

    hijab: {
      styles: [
        {
          style: 'شال پنبه‌ای ساده',
          description: 'راحت، تنفس‌پذیر، روزمره',
          how: 'ساده دور سر بپیچید و سنجاق کنید'
        },
        {
          style: 'شال حلقه‌ای (اسنود)',
          description: 'خیلی راحت - فقط سر کنید',
          how: 'آماده است، کافی است سرتان کنید'
        },
        {
          style: 'شال کتان',
          description: 'برای تابستان، خنک و راحت',
          how: 'شل و راحت، نیازی به سفت بستن نیست'
        }
      ],
      colors: ['بژ', 'سبز کمرنگ', 'آبی ملایم', 'خاکستری روشن', 'قهوه‌ای روشن'],
      tips: [
        'راحتی مهم‌تر از هر چیز',
        'پارچه‌های طبیعی: پنبه، کتان، ویسکوز',
        'رنگ‌های ملایم و زمینی',
        'نیازی به سنجاق‌های زیاد نیست'
      ]
    },

    accessories: {
      must_have: [
        'کوله‌پشتی کانواس یا چرمی',
        'کتانی سفید یا رنگی',
        'عینک آفتابی ساده',
        'ساعت دیجیتال یا ساده',
        'کلاه (کپ یا بافتنی)',
        'گوشواره‌های کوچک طلا یا نقره'
      ]
    },

    tips: [
      'راحت بودن اولویت اول شماست - این اشکالی ندارد!',
      'در پارچه‌های طبیعی سرمایه‌گذاری کنید',
      'رنگ‌های طبیعت را انتخاب کنید',
      'کیفیت بهتر از برند است',
      'یاد بگیرید چطور لباس‌های ساده را شیک کنید',
      'سبک شما پایدار و محیط‌زیست دوست است'
    ]
  },

  creative_artistic: {
    name: 'خلاق و هنری',
    icon: '🎨',
    description: 'شما فردی خلاق، منحصر به فرد و هنری هستید. سبک شما بیان شخصیت شماست و از قوانین پیروی نمی‌کند.',
    colorPalette: 'artistic_vibrant',
    
    clothing: {
      essentials: [
        { 
          item: 'قطعات vintage و دست دوم',
          description: 'لباس‌های قدیمی با داستان',
          brands: ['فروشگاه‌های کهنه‌فروشی، بازارهای کهنه']
        },
        { 
          item: 'مانتو یا کت با طرح هنری',
          description: 'نقاشی، پرینت، دست‌دوز',
          brands: ['برندهای بومی، طراحان مستقل']
        },
        { 
          item: 'شلوار یا دامن نامتقارن',
          description: 'طراحی‌های خاص و منحصر به فرد',
          brands: ['برندهای هنری، طراحان جوان']
        },
        {
          item: 'کفش‌های خاص',
          description: 'بوت‌های رنگی، کتانی‌های پرینت‌دار',
          brands: ['کانورس، دکترمارتنز، کفش‌های دست‌ساز']
        }
      ]
    },

    hair: {
      styles: [
        {
          style: 'رنگ‌های فانتزی',
          description: 'آبی، بنفش، صورتی، سبز - هر رنگی که دوست دارید',
          products: ['رنگ موی نیمه‌دائم، رنگ موقت']
        },
        {
          style: 'آندرکات یا نیمه‌تراشیده',
          description: 'یک طرف بلند، یک طرف کوتاه یا تراشیده',
          products: ['ژل، واکس قوی']
        },
        {
          style: 'دردلاک، براید باکس، کورنرو',
          description: 'بافت‌های هنری و خاص',
          products: ['محصولات نگه‌دارنده بافت']
        },
        {
          style: 'فر طبیعی و پرحجم',
          description: 'موهای فر را آزاد بگذارید - هرچه بزرگ‌تر بهتر',
          products: ['کرم فر، ژل تقویت فر']
        }
      ],
      tips: [
        'موی شما بوم هنری شماست - تجربه کنید!',
        'از رنگ‌های موقتی برای تست استفاده کنید',
        'سلامت مو مهم است - مراقبت کنید',
        'از افراد مشهور و هنرمندان الهام بگیرید'
      ]
    },

    makeup: {
      daily: {
        name: 'آرایش خلاقانه روزانه',
        steps: [
          'پوست طبیعی یا کرم پودر سبک',
          'ابروهای هنری (رنگی یا شکل خاص)',
          'خط چشم رنگی یا گرافیک',
          'سایه چشم رنگی',
          'رژ لب غیرمعمول (بنفش، آبی، مشکی)'
        ],
        products: ['پالت رنگی، لاینر رنگی، رژهای خاص']
      },
      evening: {
        name: 'آرایش هنری مهمانی',
        steps: [
          'پوست درخشان (هایلایتر زیاد)',
          'سایه چشم چند رنگ یا طرح‌دار',
          'خط چشم گرافیک یا بالدار بزرگ',
          'مژه‌های رنگی یا اکلیلی',
          'لب‌های گرادینت یا دو رنگ',
          'کلیتر، اکلیل، استیکر صورت'
        ],
        products: ['اکلیل، استیکر، پالت هنری']
      },
      tips: [
        'صورت شما بوم هنری شماست',
        'از آرایش الهام‌گرفته از هنر استفاده کنید',
        'Instagram و Pinterest را برای ایده جستجو کنید',
        'از قوانین نترسید - بشکنید!'
      ]
    },

    hijab: {
      styles: [
        {
          style: 'توربان رنگی با اکسسوری',
          description: 'توربان + بروچ یا گل',
          how: 'توربان ببندید و با سنجاق تزئینی بیاراید'
        },
        {
          style: 'شال‌های با پرینت هنری',
          description: 'طرح‌های نقاشی، گل‌های بزرگ، هندسی',
          how: 'به شیوه‌های مختلف و خلاقانه'
        },
        {
          style: 'ترکیب چند شال',
          description: 'دو یا سه رنگ با هم',
          how: 'لایه‌لایه یا ترکیبی'
        },
        {
          style: 'شال با تزئینات',
          description: 'سنجاق‌های خاص، زنجیر، مروارید',
          how: 'خلاقیت خودتان'
        }
      ],
      colors: ['تمام رنگ‌ها!', 'هرچه رنگی‌تر', 'طرح‌دار', 'چند رنگ با هم'],
      tips: [
        'هیچ محدودیتی نیست - هر چی دوست دارید',
        'توربان‌های رنگی خیلی به شما می‌آید',
        'از شال‌های طراحان جوان حمایت کنید',
        'خودتان هم می‌توانید شال‌تان را سفارشی کنید'
      ]
    },

    accessories: {
      must_have: [
        'گوشواره‌های دست‌ساز و منحصر به فرد',
        'گردنبند‌های چندلایه',
        'انگشترهای زیاد',
        'کیف‌های خاص (ک روشه، چرم دست‌دوز)',
        'کلاه‌های خاص (فدورا، بِرِت)',
        'جوراب‌های رنگی و طرح‌دار'
      ]
    },

    tips: [
      'قوانین مد برای شما وجود ندارد - خودتان را بیان کنید',
      'از فروشگاه‌های کوچک و طراحان مستقل حمایت کنید',
      'لباس‌های دست دوم گنج‌های پنهان دارند',
      'ترکیب قطعات غیرمنتظره جادو می‌کند',
      'اعتماد به نفس بهترین اکسسوری است',
      'هنر پوشیدنی است - شما یک اثر هنری هستید'
    ]
  }
};

// تابع تحلیل پیشرفته
export function analyzePersonality(answers, gender = 'female') {
  const traits = {};
  let colorFamilyVotes = {};

  // محاسبه امتیازات
  answers.forEach(answer => {
    Object.entries(answer.traits || {}).forEach(([trait, score]) => {
      traits[trait] = (traits[trait] || 0) + score;
    });

    // رای رنگی
    if (answer.colorFamily) {
      colorFamilyVotes[answer.colorFamily] = (colorFamilyVotes[answer.colorFamily] || 0) + 1;
    }
  });

  // تعیین تایپ شخصیتی
  let personalityType = 'casual_natural'; // پیش‌فرض

  if (traits.bold >= 8 && traits.confident >= 6) {
    personalityType = 'bold_confident';
  } else if (traits.elegant >= 8 || traits.professional >= 8) {
    personalityType = 'elegant_professional';
  } else if (traits.creative >= 8 || traits.artistic >= 8) {
    personalityType = 'creative_artistic';
  } else if (traits.casual >= 8 || traits.natural >= 8) {
    personalityType = 'casual_natural';
  }

  const personality = personalityTypes[personalityType];

  // انتخاب پالت رنگ
  const dominantColorFamily = Object.keys(colorFamilyVotes).reduce((a, b) => 
    colorFamilyVotes[a] > colorFamilyVotes[b] ? a : b, 
    Object.keys(colorFamilyVotes)[0]
  );

  let colorPaletteName = personality.colorPalette;
  
  // اگر کاربر رنگ خاصی را بیشتر انتخاب کرده
  if (dominantColorFamily) {
    const familyToPalette = {
      'warm': 'warm_energetic',
      'neutral': 'neutral_classic',
      'pastel': 'pastel_romantic',
      'artistic': 'artistic_vibrant',
      'earth': 'earth_natural',
      'neon': 'neon_modern'
    };
    colorPaletteName = familyToPalette[dominantColorFamily] || colorPaletteName;
  }

  const selectedPalette = colorPalettes[colorPaletteName];

  const result = {
    type: personalityType,
    name: personality.name,
    icon: personality.icon,
    description: personality.description,
    traits: Object.entries(traits)
      .sort(([,a], [,b]) => b - a)
      .slice(0, 5)
      .map(([name, score]) => ({ name: translateTrait(name), score })),
    
    colors: selectedPalette,
    
    clothing: personality.clothing,
    
    hair: personality.hair,
    
    makeup: gender === 'female' ? personality.makeup : undefined,
    
    hijab: gender === 'female' ? personality.hijab : undefined,
    
    accessories: personality.accessories,
    
    tips: personality.tips,

    skinToneGuide: skinToneGuide,
    
    colorCombinations: colorCombinations,

    glossary: fashionGlossary
  };

  // اگر جنسیت مرد باشد، بخش مو را با مثال‌های مردانه تقویت کنیم
  if (gender === 'male') {
    result.hair = result.hair || {};
    const maleHair = {
      styles: [
        { style: 'فید کم/متوسط', description: 'مدرن و تمیز؛ مناسب صورت‌های بیضی/گرد', products: ['پماد مات، اسپری فیکس'] },
        { style: 'کوئیف یا پامپادور', description: 'حجم در بالا، اطراف کوتاه؛ استایل مردانه کلاسیک', products: ['پماد براق، سشوار'] },
        { style: 'کراپ فرانسوی', description: 'مدرن و مینیمال؛ نگهداری آسان', products: ['کرم مو باف، واکس سبک'] },
        { style: 'موج‌دار/فر طبیعی', description: 'طبیعی و جذاب؛ حجم متوسط نگه دارید', products: ['کرم فر، دیفیوزر'] },
        { style: 'بوزکات', description: 'خیلی کوتاه و کاربردی؛ کم‌هزینه و خنک', products: ['کرم مرطوب‌کننده پوست سر'] }
      ],
      tips: [
        'فرم صورت را بشناسید و بر اساس آن مدل انتخاب کنید',
        'مرز خط ریش و گردن را مرتب نگه دارید',
        'هر ۳-۴ هفته یکبار ترمیم کنید',
        'محصولات مات برای استایل روزانه طبیعی‌ترند'
      ]
    };

    // Merge
    result.hair.styles = [...(result.hair.styles || []), ...maleHair.styles];
    result.hair.tips = [...(result.hair.tips || []), ...maleHair.tips];
  }

  return result;
}

// ترجمه ویژگی‌ها به فارسی
function translateTrait(trait) {
  const translations = {
    bold: 'جسور',
    confident: 'با اعتماد به نفس',
    energetic: 'پرانرژی',
    professional: 'حرفه‌ای',
    elegant: 'شیک',
    organized: 'منظم',
    casual: 'راحت',
    natural: 'طبیعی',
    calm: 'آرام',
    creative: 'خلاق',
    artistic: 'هنری',
    unique: 'منحصر به فرد',
    minimalist: 'مینیمال',
    practical: 'کاربردی',
    romantic: 'رمانتیک',
    feminine: 'زنانه',
    modern: 'مدرن',
    trendy: 'مد روز',
    classic: 'کلاسیک',
    glamorous: 'باشکوه',
    warm: 'گرم',
    soft: 'نرم',
    earthy: 'زمینی',
    balanced: 'متعادل',
    flexible: 'انعطاف‌پذیر',
    traditional: 'سنتی',
    modest: 'محجوب',
    moderate: 'متعادل',
    liberal: 'آزاد',
    free: 'آزاد',
    social: 'اجتماعی',
    extrovert: 'برون‌گرا',
    quality_focused: 'کیفیت‌محور',
    positive: 'مثبت',
    strong: 'قوی'
  };

  return translations[trait] || trait;
}

export default {
  analyzePersonality
};

